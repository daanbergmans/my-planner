(this.webpackJsonpmyplanner=this.webpackJsonpmyplanner||[]).push([[0],{372:function(e,t,n){},408:function(e,t,n){"use strict";n.r(t);var r=n(11),c=n(1),a=n(2),i=n(93),s=n.n(i),o=n(14),l=n(15),j=n(17),d=n(16),h=n(10),u=n(7),b=n(9),p=Object(b.b)((function(e){return{profile:e.firebase.profile}}),(function(e){return{signOut:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){var t=e.profile;return Object(c.jsxs)("ul",{className:"right",children:[Object(c.jsx)("li",{children:Object(c.jsx)(h.c,{to:"/create",children:"New Project"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{onClick:e.signOut,children:"Log Out"})}),Object(c.jsx)("li",{children:Object(c.jsx)(h.c,{to:"/",className:"btn btn-floating pink lighten-1",children:t.initials})})]})})),O=function(){return Object(c.jsxs)("ul",{className:"right",children:[Object(c.jsx)("li",{children:Object(c.jsx)(h.c,{to:"/SignUp",children:"Sign up"})}),Object(c.jsx)("li",{children:Object(c.jsx)(h.c,{to:"/SignIn",children:"Sign in"})})]})},m=Object(b.b)((function(e){return{auth:e.firebase.auth}}))((function(e){var t=e.auth.uid?Object(c.jsx)(p,{}):Object(c.jsx)(O,{});return Object(c.jsx)("nav",{className:"nav-wrapper grey darken-3",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(h.b,{to:"/",className:"brand-logo",children:"My Planner"}),t]})})})),f=n(55),x=n.n(f),g=function(e){var t=e.notifications;return Object(c.jsx)("div",{className:"section",children:Object(c.jsx)("div",{className:"card z-depth-0",children:Object(c.jsxs)("div",{className:"card-content",children:[Object(c.jsx)("span",{className:"card-title",children:"Notifications"}),Object(c.jsx)("ul",{className:"notifications",children:t&&t.map((function(e){return Object(c.jsxs)("li",{children:[Object(c.jsxs)("span",{className:"pink-text",children:[e.user," "]}),Object(c.jsx)("span",{children:e.content}),Object(c.jsx)("div",{className:"grey-text notificaiton-date",children:x()(e.time.toDate()).fromNow()})]},e.id)}))})]})})})},v=function(e){var t=e.project;return Object(c.jsx)("div",{className:"card z-depth-0 project-summary",children:Object(c.jsxs)("div",{className:"card-content grey-text text-darken-3",children:[Object(c.jsx)("span",{className:"card-title",children:t.title}),Object(c.jsxs)("p",{children:["Posted by ",t.authorFirstName," ",t.authorLastName]}),Object(c.jsx)("p",{className:"grey-text",children:x()(t.createdAt.toDate()).calendar()})]})})},N=function(e){var t=e.projects;return Object(c.jsx)("div",{className:"project-list section",children:t&&t.map((function(e){return Object(c.jsx)(h.b,{to:"/project/"+e.id,children:Object(c.jsx)(v,{project:e})},e.id)}))})},E=n(26),C=n(23),y=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.projects,n=e.auth,r=e.notifications;return n.uid?Object(c.jsx)("div",{className:"dashboard container",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col s12 m6",children:Object(c.jsx)(N,{projects:t})}),Object(c.jsx)("div",{className:"col s12 m5 offset-m1",children:Object(c.jsx)(g,{notifications:r})})]})}):Object(c.jsx)(u.a,{to:"/signin"})}}]),n}(a.Component),S=Object(C.d)(Object(b.b)((function(e){return{projects:e.firestore.ordered.projects,auth:e.firebase.auth,notifications:e.firestore.ordered.notifications}})),Object(E.firestoreConnect)([{collection:"projects",orderBy:["createdAt","desc"]},{collection:"notifications",limit:3,orderBy:["time","desc"]}]))(y),R=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).deleteCurrentProject=function(){if(window.confirm("Are you sure you want to delete this project?")){var t=e.props.match.params.id;e.props.deleteProject(t),e.props.history.push("/")}},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.project,n=e.auth,r=this.props.match.params.id;return n.uid?t?Object(c.jsx)("div",{className:"container section project-details",children:Object(c.jsxs)("div",{className:"card z-depth-0",children:[Object(c.jsxs)("div",{className:"card-content",children:[Object(c.jsx)("div",{children:Object(c.jsx)("span",{className:"card-title",children:t.title})}),Object(c.jsx)("p",{children:t.content})]}),Object(c.jsxs)("div",{className:"card-action grey lighten-4 grey-text",children:[Object(c.jsxs)("div",{children:["Posted by ",t.authorFirstName," ",t.authorLastName]}),Object(c.jsx)("div",{children:x()(t.createdAt.toDate()).calendar()})]}),Object(c.jsxs)("div",{className:"card-action grey lighten-4 grey-text",children:[Object(c.jsx)(h.b,{className:"btn-floating btn-small waves-effect waves-light blue button-margin",to:"/edit/"+r,children:Object(c.jsx)("i",{className:"material-icons",children:"edit"})},r),Object(c.jsx)("button",{className:"btn-floating btn-small waves-effect waves-light red",onClick:this.deleteCurrentProject,children:Object(c.jsx)("i",{className:"material-icons",children:"delete"})})]})]})}):Object(c.jsx)("div",{className:"container center",children:Object(c.jsx)("p",{children:"Loading project..."})}):Object(c.jsx)(u.a,{to:"/signin"})}}]),n}(a.Component),w=Object(C.d)(Object(b.b)((function(e,t){var n=t.match.params.id,r=e.firestore.data.projects;return{project:r?r[n]:null,auth:e.firebase.auth}}),(function(e,t){return{deleteProject:function(t){return e(function(e){return function(t,n,r){r.getFirebase,(0,r.getFirestore)().collection("projects").doc(e).delete().then((function(){t({type:"DELETE_PROJECT",projectId:e})})).catch((function(e){t({type:"DELETE_PROJECT_ERROR",error:e})}))}}(t))}}})),Object(E.firestoreConnect)((function(e){return[{collection:"projects",doc:e.match.params.id,storeAs:"selectedProject"}]})))(R),P=n(32),I=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(P.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?Object(c.jsx)(u.a,{to:"/"}):Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("form",{className:"white",onSubmit:this.handleSubmit,children:[Object(c.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign In"}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"email",children:"Email"}),Object(c.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Login"}),Object(c.jsx)("div",{className:"red-text center",children:t?Object(c.jsx)("p",{children:t}):null})]})]})})}}]),n}(a.Component),F=Object(b.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e(function(e){return function(t,n,r){(0,r.getFirebase)().auth().signInWithEmailAndPassword(e.email,e.password).then((function(){t({type:"LOGIN_SUCCESS"})})).catch((function(e){t({type:"LOGIN_ERROR",error:e})}))}}(t))}}}))(I),T=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:"",firstName:"",lastName:""},e.handleChange=function(t){e.setState(Object(P.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signUp(e.state)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.authError;return t.uid?Object(c.jsx)(u.a,{to:"/"}):Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("form",{className:"white",onSubmit:this.handleSubmit,children:[Object(c.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign Up"}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"email",children:"Email"}),Object(c.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(c.jsx)("input",{type:"text",id:"firstName",onChange:this.handleChange})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(c.jsx)("input",{type:"text",id:"lastName",onChange:this.handleChange})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Sign up"}),Object(c.jsx)("div",{className:"red-text center",children:n?Object(c.jsx)("p",{children:n}):null})]})]})})}}]),n}(a.Component),_=Object(b.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError}}),(function(e){return{signUp:function(t){return e(function(e){return function(t,n,r){var c=r.getFirebase,a=r.getFirestore,i=c(),s=a();i.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return s.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]})})).then((function(){t({type:"SIGNUP_SUCCESS"})})).catch((function(e){t({type:"SIGNUP_ERROR",error:e})}))}}(t))}}}))(T),k=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={title:"",content:""},e.handleChange=function(t){e.setState(Object(P.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createProject(e.state),e.props.history.push("/")},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.auth.uid?Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("form",{className:"white",onSubmit:this.handleSubmit,children:[Object(c.jsx)("h5",{className:"grey-text text-darken-3",children:"Create new project"}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"title",children:"Title"}),Object(c.jsx)("input",{type:"text",id:"title",onChange:this.handleChange})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"content",children:"Content"}),Object(c.jsx)("textarea",{id:"content",className:"materialize-textarea",onChange:this.handleChange})]}),Object(c.jsx)("div",{className:"input-field",children:Object(c.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Create"})})]})}):Object(c.jsx)(u.a,{to:"/signin"})}}]),n}(a.Component),A=Object(b.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createProject:function(t){return e(function(e){return function(t,n,c){c.getFirebase;var a=(0,c.getFirestore)(),i=n().firebase.profile,s=n().firebase.auth.uid;a.collection("projects").add(Object(r.a)(Object(r.a)({},e),{},{authorFirstName:i.firstName,authorLastName:i.lastName,authorId:s,createdAt:new Date})).then((function(){t({type:"CREATE_PROJECT",project:e})})).catch((function(e){t({type:"CREATE_PROJECT_ERROR",error:e})}))}}(t))}}}))(k),L=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(P.a)({},e.target.id,e.target.value))},r.handleSubmit=function(e){e.preventDefault();var t=[];""===r.state.title&&t.push("A title is required!"),""===r.state.content&&t.push("A content is required!"),t.length>0?r.setState({errors:t}):0===t.length&&(r.props.editProject(r.props.match.params.id,{title:r.state.title,content:r.state.content}),r.props.history.push("/"))},r.state={title:e.title,content:e.content,errors:[]},r}return Object(l.a)(n,[{key:"render",value:function(){return console.log(this.props),Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("form",{className:"white",onSubmit:this.handleSubmit,children:[Object(c.jsx)("h5",{className:"grey-text text-darken-3",children:"Edit project"}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"title",className:"active",children:"Title"}),Object(c.jsx)("input",{type:"text",id:"title",value:this.state.title,onChange:this.handleChange})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"content",className:"active",children:"Content"}),Object(c.jsx)("textarea",{id:"content",className:"materialize-textarea",value:this.state.content,onChange:this.handleChange})]}),Object(c.jsx)("div",{className:"input-field",children:Object(c.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Edit"})}),Object(c.jsx)("div",{children:Object(c.jsx)("p",{className:"center red-text",children:this.state.error?Object(c.jsx)("p",{children:"this.state.error"}):null})})]})})}}]),n}(a.Component),D=Object(b.b)((function(e,t){var n=e.firestore.data.selectedProject;return{title:n.title,content:n.content}}),(function(e){return{editProject:function(t,n){return e(function(e,t){return function(n,c,a){a.getFirebase,(0,a.getFirestore)().collection("projects").doc(e).update(Object(r.a)({},t)).then((function(){n({type:"EDIT_PROJECT",projectId:e})})).catch((function(e){n({type:"EDIT_PROJECT_ERROR",error:e})}))}}(t,n))}}}))(L),U=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(c.jsx)(h.a,{children:Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(m,{}),Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{exact:!0,path:"/",component:S}),Object(c.jsx)(u.b,{path:"/project/:id",component:w}),Object(c.jsx)(u.b,{path:"/signin",component:F}),Object(c.jsx)(u.b,{path:"/signup",component:_}),Object(c.jsx)(u.b,{path:"/create",component:A}),Object(c.jsx)(u.b,{path:"/edit/:id",component:D})]})]})})}}]),n}(a.Component),J=(n(372),{authError:null}),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("Login error!"),Object(r.a)(Object(r.a)({},e),{},{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("Login success!"),Object(r.a)(Object(r.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("Sign out success!"),e;case"SIGNUP_SUCCESS":return console.log("Sign up success!"),Object(r.a)(Object(r.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return console.log("Sign up failed!"),Object(r.a)(Object(r.a)({},e),{},{authError:t.error.message});default:return e}},z={projects:[{id:"1",title:"Help me find Peach",content:"Blah blah blah"},{id:"2",title:"Collect all the stars",content:"Blah blah blah"},{id:"3",title:"Egg hunt with Yoshi",content:"Blah blah blah"}]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PROJECT":return console.log("Created project",t.project),e;case"CREATE_PROJECT_ERROR":return console.log("Create project error",t.error),e;case"DELETE_PROJECT":return console.log("Deleted project",t.projectId),e;case"DELETE_PROJECT_ERROR":return console.log("Delete project error",t.error),e;case"EDIT_PROJECT":return console.log("Edited project",t.projectId),e;case"EDIT_PROJECT_ERROR":return console.log("Edit project error",t.error),e;default:return e}},W=n(56),H=Object(C.c)({auth:G,project:B,firestore:W.firestoreReducer,firebase:E.firebaseReducer}),Y=n(214),q=n(43);n(404),n(406);q.a.initializeApp({apiKey:"AIzaSyAsM0ruHktwdgjJjL7WcbGIxnEbCILVH4Y",authDomain:"dax-myplanner.firebaseapp.com",databaseURL:"https://dax-myplanner.firebaseio.com",projectId:"dax-myplanner",storageBucket:"dax-myplanner.appspot.com",messagingSenderId:"658763380770",appId:"1:658763380770:web:c6e86fff4db6a55edf327b",measurementId:"G-5W96T08JGY"}),q.a.firestore().settings({timestampsInSnapshots:!0});var M=q.a,K=Object(C.e)(H,Object(C.d)(Object(C.a)(Y.a.withExtraArgument({getFirebase:E.getFirebase,getFirestore:W.getFirestore})),Object(W.reduxFirestore)(q.a,M))),V={firebase:q.a,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:K.dispatch,createFirestoreInstance:W.createFirestoreInstance};function Q(e){var t=e.children,n=Object(b.c)((function(e){return e.firebase.auth}));return Object(E.isLoaded)(n)?t:Object(c.jsx)("div",{children:"Loading Screen..."})}s.a.render(Object(c.jsx)(b.a,{store:K,children:Object(c.jsx)(E.ReactReduxFirebaseProvider,Object(r.a)(Object(r.a)({},V),{},{children:Object(c.jsx)(Q,{children:Object(c.jsx)(U,{})})}))}),document.getElementById("root"))}},[[408,1,2]]]);
//# sourceMappingURL=main.ea3af886.chunk.js.map